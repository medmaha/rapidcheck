<div class="collections w-full p-2 py-0">
    <div class="flex justify-between">
        <button
            (click)="toggleCollapse()"
            [class.opacity-100]="!collapsed"
            [class.opacity-80]="collapsed"
            class="font-semibold hover:opacity-100 transition-all"
        >
            History
        </button>
        <button
            (click)="toggleCollapse()"
            class="opacity-80 hover:opacity-100 transition-all"
        >
            <svg
                *ngIf="collapsed"
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                fill="currentColor"
                viewBox="0 0 24 24"
            >
                <path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z" />
            </svg>

            <svg
                *ngIf="!collapsed"
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                fill="currentColor"
                viewBox="0 0 24 24"
            >
                <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" />
            </svg>
        </button>
    </div>
    <div *ngIf="histories.length && !collapsed" class="pl-2">
        <div class="flex gap-2 items-center" *ngFor="let history of histories">
            <button
                (click)="activeHistory(history)"
                class="text-xs w-full flex-1 p-2 cursor-pointer text-left inline-flex items-center gap-2 hover:bg-muted-dimmer dark:hover:bg-muted-dark-dimer transition rounded-md"
                [class.text-sky-500]="history.active"
            >
                <span [class]="_getMethodColor(history.payload.method)">{{
                    history.payload.method
                }}</span>
                <span
                    title="{{ history.name }}"
                    class="text-xs flex-1 truncate inline-block max-w-[22ch]"
                    >{{ history.name }}</span
                >
                <span
                    class="text-xs"
                    [class]="_getStatusColor(history.payload.status_code)"
                    >{{ history.payload.status_code }}</span
                >
            </button>
            <button title="Delete" (click)="deleteHistory(history.historyId)">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    class="fill-red-500 opacity-80 hover:opacity-100"
                    viewBox="0 0 24 24"
                >
                    <path
                        d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"
                    />
                </svg>
            </button>
        </div>
    </div>
</div>
