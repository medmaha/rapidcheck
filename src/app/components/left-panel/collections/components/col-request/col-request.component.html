<div class="w-full h-full">
    <div
        class="flex items-center h-full gap-2 justify-between w-full relative pb-2"
    >
        <button
            (click)="toggleCollapse()"
            class="text-sm truncate inline-flex items-center gap-1 group"
        >
            <span class="opacity-80 group-hover:opacity-100 transition-all">
                <svg
                    *ngIf="collapsed"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                    class=""
                >
                    <path
                        d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"
                    />
                </svg>

                <svg
                    *ngIf="!collapsed"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                >
                    <path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z" />
                </svg>
            </span>
            <span class="opacity-80 group-hover:opacity-100 transition-all">
                {{ collection.name }}
            </span>
        </button>

        <button
            (click)="toggleDropdown()"
            class="opacity-80 hover:opacity-100 transition-all"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16px"
                height="16px"
                viewBox="0 0 92 92"
                fill="currentColor"
            >
                <path
                    id="XMLID_30_"
                    d="M21,53c-1.8,0-3.7-0.8-5-2.1c-1.3-1.3-2-3.1-2-4.9c0-1.8,0.8-3.6,2-5c1.3-1.3,3.1-2,5-2c1.8,0,3.6,0.8,4.9,2
	c1.3,1.3,2.1,3.1,2.1,5c0,1.8-0.8,3.6-2.1,4.9C24.6,52.2,22.8,53,21,53z M50.9,50.9c1.3-1.3,2.1-3.1,2.1-4.9c0-1.8-0.8-3.6-2.1-5
	c-1.3-1.3-3.1-2-4.9-2c-1.8,0-3.7,0.8-5,2c-1.3,1.3-2,3.1-2,5c0,1.8,0.8,3.6,2,4.9c1.3,1.3,3.1,2.1,5,2.1
	C47.8,53,49.6,52.2,50.9,50.9z M75.9,50.9c1.3-1.3,2.1-3.1,2.1-4.9c0-1.8-0.8-3.6-2.1-5c-1.3-1.3-3.1-2-4.9-2c-1.8,0-3.7,0.8-5,2
	c-1.3,1.3-2,3.1-2,5c0,1.8,0.8,3.6,2,4.9c1.3,1.3,3.1,2.1,5,2.1C72.8,53,74.6,52.2,75.9,50.9z"
                />
            </svg>
        </button>

        <div
            *ngIf="dropdown"
            class="absolute mb-2 top-[50%] right-0 z-20 h-max rounded shadow bg-muted-dimmer dark:bg-muted-dark"
        >
            <ul class="flex flex-col gap-2 z-10 p-2">
                <li
                    class="inline-flex gap-6 items-center text-sm p-2 hover:bg-muted-dim dark:hover:bg-muted-dark-dim rounded-md"
                >
                    <button class="flex-1 text-left">Edit</button>
                    <button>
                        <svg
                            class="fill-current"
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            s
                        >
                            <path
                                d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"
                            />
                        </svg>
                    </button>
                </li>
                <li
                    class="inline-flex gap-6 items-center text-sm p-2 hover:bg-muted-dim dark:hover:bg-muted-dark-dim rounded-md"
                >
                    <button
                        (click)="deleteCollection()"
                        class="flex-1 text-left"
                    >
                        Delete
                    </button>
                    <button (click)="deleteCollection()" class="text-red-500">
                        <svg
                            class="fill-current"
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            s
                        >
                            <path
                                d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"
                            />
                        </svg>
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <div class="block relative" *ngIf="!collapsed">
        <div class="pl-4 block w-full">
            <app-col-request-tab
                *ngFor="let tab of collection.tabs; let idx = index"
                [tab]="tab"
                [idx]="idx"
            ></app-col-request-tab>
        </div>
        <div
            *ngIf="!collapsed"
            class="absolute left-[6px] top-0 w-[2px] h-full pointer-events-none bg-muted-dimmer dark:bg-muted-dark-dimer"
        ></div>
    </div>
</div>
